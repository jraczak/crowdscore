(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,s=function(t,e){function s(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};CS.VenueEditView=function(i){function o(){return this.unsetBusyState=e(this.unsetBusyState,this),this.setBusyState=e(this.setBusyState,this),this.resetSubcategoryField=e(this.resetSubcategoryField,this),this.updateSubcategorySelectOptions=e(this.updateSubcategorySelectOptions,this),this.updateSubcategorySelect=e(this.updateSubcategorySelect,this),t=o.__super__.constructor.apply(this,arguments)}return s(o,i),o.prototype.el="#new_venue",o.prototype.events={"change #venue_venue_category_id":"updateSubcategorySelect","cs:busy":"setBusyState","cs:finished":"unsetBusyState"},o.prototype.initialize=function(){return this.category_field=this.$("#venue_venue_category_id"),this.subcategory_field=this.$("#venue_venue_subcategory_id"),this.category_throbber=this.category_field.next("img"),this.category_field.trigger("change")},o.prototype.updateSubcategorySelect=function(){var t;return t=this.category_field.val(),""!==t?($(this.el).trigger("cs:busy"),$.get("/venue_categories/"+t+"/venue_subcategories.json").success(this.updateSubcategorySelectOptions).complete(this.unsetBusyState)):this.hideFieldIfNoOptions()},o.prototype.updateSubcategorySelectOptions=function(t){var e;return this.resetSubcategoryField(),e='<option value="${id}">${name}</option>',$.tmpl(e,t).appendTo(this.subcategory_field)},o.prototype.resetSubcategoryField=function(){return this.subcategory_field.html("<option value></option")},o.prototype.setBusyState=function(){return this.disableSelect(),this.category_throbber.show()},o.prototype.unsetBusyState=function(){return this.enableSelect(),this.category_throbber.hide(),this.hideFieldIfNoOptions()},o.prototype.disableSelect=function(){return this.subcategory_field.attr("disabled","disabled").addClass("disabled")},o.prototype.enableSelect=function(){return this.subcategory_field.removeAttr("disabled").removeClass("disabled")},o.prototype.hideFieldIfNoOptions=function(){return this.subcategory_field.find("option").length>1?this.subcategory_field.parents(".clearfix").show():this.subcategory_field.parents(".clearfix").hide()},o}(Backbone.View)}).call(this);
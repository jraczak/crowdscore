function Gmap(e){this.data=e,this.markers=new Array,this.bounds=new google.maps.LatLngBounds,this.initialize(),this.currentInfoWindow=null,this.setupSearchResultClickEvent()}Gmap.prototype.addMapMarkers=function(){for(var e=this.map,t=0;t<this.data.length;t++)this.createMarkerandInfoWindow(t);e.fitBounds(this.bounds)},Gmap.prototype.createMarkerandInfoWindow=function(e){var t,a,n,o,i,r,s=this;t=new google.maps.LatLng(this.data[e].lat,this.data[e].lng),this.bounds.extend(t),a=new google.maps.Marker({position:t,map:this.map}),r=new google.maps.InfoWindow({content:this.data[e].description,pixelOffset:new google.maps.Size(-125,180)}),o=$(r.content).find(".pie-graph-loader"),n=o.data("percent"),i=o.data("venue-id"),s.markers.push({marker:a,venueId:i,infoWindow:r,percent:n}),google.maps.event.addListener(a,"click",function(){s.openMapMarker(i)})},Gmap.prototype.openMapMarker=function(e){var t=this.markers.filter(function(t){return t.venueId==e});t=t[0],this.currentInfoWindow&&this.currentInfoWindow.close(),this.currentInfoWindow=t.infoWindow,t.infoWindow.open(this.map,t.marker),this.animateVenueInfoWindowGraph(t.venueId,t.percent),this.clearGoogleMarkup(),this.updateSearchResultsBank(t.venueId)},Gmap.prototype.clearGoogleMarkup=function(){var e=$(".gm-style .gm-style-iw");e.prev().remove(),e.next().remove()},Gmap.prototype.animateVenueInfoWindowGraph=function(e,t){$("[data-venue-id="+e+"][data-percent="+t+"]").addClass("animate-to-"+t)},Gmap.prototype.updateSearchResultsBank=function(e){$(".search-result").removeClass("active"),$(".search-result[data-venue-id="+e+"]").addClass("active")},Gmap.prototype.setupSearchResultClickEvent=function(){var e=this;$("body").on("click",".search-result",function(){var t=$(this).data("venue-id");e.openMapMarker(t)})},Gmap.prototype.initialize=function(){var e=document.getElementById("search-results-map"),t={zoom:8,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(e,t),this.addMapMarkers()};
(function(){var t,n=function(t,n){return function(){return t.apply(n,arguments)}},e={}.hasOwnProperty,o=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},r=[].indexOf||function(t){for(var n=0,e=this.length;e>n;n++)if(n in this&&this[n]===t)return n;return-1};window.TagCollection=function(e){function u(){return this.addToVenue=n(this.addToVenue,this),t=u.__super__.constructor.apply(this,arguments)}return o(u,e),u.prototype.url=function(){return null!=this.venueId?"/venues/"+this.venueId+"/tags.json":"/venue_tags.json"},u.prototype.model=Tag,u.prototype.comparator=function(t){return t.get("name")},u.prototype.setVenueId=function(t){this.venueId=t},u.prototype.exclude=function(t){this.excluded_ids=t},u.prototype.byCategory=function(){var t,n=this;return t=this.reduce(function(t,e){var o,u,i;return null!=n.excluded_ids&&(i=e.get("id"),r.call(n.excluded_ids,i)>=0)?t:(u=e.category(),o=_.find(t,function(t){return t.name===u}),null!=o?o.tags.push(e):t.push({name:u,id:e.categoryId(),tags:[e]}),t)},[])},u.prototype.addToVenue=function(t){var n=this;return $.post(this.url(),{tag_id:t}).complete(function(){return n.fetch()})},u}(Backbone.Collection)}).call(this);
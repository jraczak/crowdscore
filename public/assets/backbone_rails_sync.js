(function(){var t={create:"POST",update:"PUT","delete":"DELETE",read:"GET"},e=function(t){return t&&t.url?_.isFunction(t.url)?t.url():t.url:null},r=function(){throw new Error("A 'url' property or function must be specified")};Backbone.sync=function(n,a,o){var c=t[n],u=_.extend({type:c,dataType:"json",beforeSend:function(t){var e=$('meta[name="csrf-token"]').attr("content");e&&t.setRequestHeader("X-CSRF-Token",e),a.trigger("sync:start")}},o);if(u.url||(u.url=e(a)||r()),!u.data&&a&&("create"==n||"update"==n)){u.contentType="application/json";var i={};a.paramRoot?i[a.paramRoot]=a.toJSON():i=a.toJSON(),u.data=JSON.stringify(i)}"GET"!==u.type&&(u.processData=!1);var p=o.complete;return u.complete=function(t,e){a.trigger("sync:end"),p&&p(t,e)},$.ajax(u)}}).call(this);
function Gmap(e){this.data=e,this.markers=new Array,this.bounds=new google.maps.LatLngBounds,this.initialize(),this.currentInfoWindow=null,this.setupSearchResultClickEvent()}function VenueMap(e){this.data=e[0],this.bounds=new google.maps.LatLngBounds,this.initialize()}Gmap.prototype.addMapMarkers=function(){for(var e=this.map,t=0;t<this.data.length;t++)this.createMarkerandInfoWindow(t);google.maps.event.addListener(e,"zoom_changed",function(){zoomChangeBoundsListener=google.maps.event.addListener(e,"bounds_changed",function(){this.getZoom()>15&&1==this.initialZoom&&(this.setZoom(15),this.initialZoom=!1),google.maps.event.removeListener(zoomChangeBoundsListener)})}),e.initialZoom=!0,this.markers>0&&e.fitBounds(this.bounds)},Gmap.prototype.createMarkerandInfoWindow=function(e){var t,n,a,o,i,s,r=this;t=new google.maps.LatLng(this.data[e].lat,this.data[e].lng),this.bounds.extend(t),n=new google.maps.Marker({position:t,map:this.map});var p=$(this.data[e].description);"lists"==window.location.pathname.split("/")[1]?(p.find(".cs-iw-cid").remove(),s=new google.maps.InfoWindow({content:p.prop("outerHTML"),pixelOffset:new google.maps.Size(-125,125)})):"search"==window.location.pathname.split("/")[2]?(p.find(".distance").html($('.search-result[data-venue-id="'+p.data("venue-id")+'"]').find(".venue-distance").text()),s=new google.maps.InfoWindow({content:p.prop("outerHTML"),pixelOffset:new google.maps.Size(-125,180)})):s=new google.maps.InfoWindow({content:this.data[e].description,pixelOffset:new google.maps.Size(-125,180)}),o=$(s.content).find(".pie-graph-loader"),a=o.data("percent"),i=o.data("venue-id"),r.markers.push({marker:n,venueId:i,infoWindow:s,percent:a}),google.maps.event.addListener(n,"click",function(){r.openMapMarker(i)})},Gmap.prototype.openMapMarker=function(e){var t=this.markers.filter(function(t){return t.venueId==e});t=t[0],this.currentInfoWindow&&this.currentInfoWindow.close(),this.currentInfoWindow=t.infoWindow,t.infoWindow.open(this.map,t.marker),this.animateVenueInfoWindowGraph(t.venueId,t.percent),this.clearGoogleMarkup(),this.updateSearchResultsBank(t.venueId)},Gmap.prototype.clearGoogleMarkup=function(){var e=$(".gm-style .gm-style-iw");e.prev().remove(),e.next().remove()},Gmap.prototype.animateVenueInfoWindowGraph=function(e,t){$("[data-venue-id="+e+"][data-percent="+t+"]").addClass("animate-to-"+t)},Gmap.prototype.updateSearchResultsBank=function(e){$(".search-result").removeClass("active"),$(".search-result[data-venue-id="+e+"]").addClass("active")},Gmap.prototype.setupSearchResultClickEvent=function(){var e=this;$("body").on("click",".search-result",function(){var t=$(this).data("venue-id");e.openMapMarker(t)})},Gmap.prototype.initialize=function(){var e=document.getElementById("search-results-map"),t=$("#search-results-map"),n={zoom:13,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,center:{lat:t.data("lat"),lng:t.data("lng")}};this.map=new google.maps.Map(e,n),this.addMapMarkers()},VenueMap.prototype.initialize=function(){var e=document.getElementById("venue-map"),t={zoom:8,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(e,t),this.addMapSettings()},VenueMap.prototype.addMapSettings=function(){var e=this.map;this.createMarker(),google.maps.event.addListener(e,"zoom_changed",function(){zoomChangeBoundsListener=google.maps.event.addListener(e,"bounds_changed",function(){this.getZoom()>15&&1==this.initialZoom&&(this.setZoom(15),this.initialZoom=!1),google.maps.event.removeListener(zoomChangeBoundsListener)})}),e.initialZoom=!0,e.fitBounds(this.bounds)},VenueMap.prototype.createMarker=function(){var e,t;e=new google.maps.LatLng(this.data.lat,this.data.lng),this.bounds.extend(e),t=new google.maps.Marker({position:e,map:this.map})};
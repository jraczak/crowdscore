script type='text/javascript' src='http://maps.googleapis.com/maps/api/js?sensor=false'

.row
  .span12
    h1 = resource.name

    ul.media-grid
      - resource.venue_images.each do |image|
        li = link_to image_tag(image.image_file.thumb.url, :class => 'thumbnail'), '#'
.row
  .span5 style="height: 300px; margin-bottom: 30px;"
    #map_canvas style="width: 100%; height: 100%;"

javascript:
  $(function() {

    var setMarker = function(r) {
      var position = r[0].geometry.location;
      var myOptions = {
        zoom: 15,
        center: position,
        disableDefaultUI: true,
        zoomControl: true,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };

      var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

      marker = new google.maps.Marker({
        map: map,
        draggable: true
      });
      marker.setPosition(position);
    };

    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({address: "#{resource.address1}, #{resource.city}, #{resource.state} #{resource.zip}"}, setMarker);
  });

.well
  = link_to "Add a new image", new_venue_image_path(resource), class: 'btn primary'
